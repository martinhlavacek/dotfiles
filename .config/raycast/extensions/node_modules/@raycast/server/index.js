"use strict";var Mc=Object.create;var Dn=Object.defineProperty;var Oc=Object.getOwnPropertyDescriptor;var Cc=Object.getOwnPropertyNames;var Nc=Object.getPrototypeOf,Ac=Object.prototype.hasOwnProperty;var a=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var jc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Cc(e))!Ac.call(t,i)&&i!==r&&Dn(t,i,{get:()=>e[i],enumerable:!(n=Oc(e,i))||n.enumerable});return t};var me=(t,e,r)=>(r=t!=null?Mc(Nc(t)):{},jc(e||!t||!t.__esModule?Dn(r,"default",{value:t,enumerable:!0}):r,t));var Dt=a((ib,Fn)=>{var Lc=typeof global=="object"&&global&&global.Object===Object&&global;Fn.exports=Lc});var ee=a((sb,zn)=>{var Ic=Dt(),$c=typeof self=="object"&&self&&self.Object===Object&&self,Dc=Ic||$c||Function("return this")();zn.exports=Dc});var Je=a((ob,Hn)=>{var Fc=ee(),zc=Fc.Symbol;Hn.exports=zc});var Gn=a((ab,Bn)=>{var Wn=Je(),Un=Object.prototype,Hc=Un.hasOwnProperty,Wc=Un.toString,Ke=Wn?Wn.toStringTag:void 0;function Uc(t){var e=Hc.call(t,Ke),r=t[Ke];try{t[Ke]=void 0;var n=!0}catch{}var i=Wc.call(t);return n&&(e?t[Ke]=r:delete t[Ke]),i}Bn.exports=Uc});var Kn=a((ub,Jn)=>{var Bc=Object.prototype,Gc=Bc.toString;function Jc(t){return Gc.call(t)}Jn.exports=Jc});var Re=a((cb,Xn)=>{var Vn=Je(),Kc=Gn(),Vc=Kn(),Qc="[object Null]",Xc="[object Undefined]",Qn=Vn?Vn.toStringTag:void 0;function Yc(t){return t==null?t===void 0?Xc:Qc:Qn&&Qn in Object(t)?Kc(t):Vc(t)}Xn.exports=Yc});var mt=a((lb,Yn)=>{function Zc(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Yn.exports=Zc});var Ft=a((fb,Zn)=>{var el=Re(),tl=mt(),rl="[object AsyncFunction]",nl="[object Function]",il="[object GeneratorFunction]",sl="[object Proxy]";function ol(t){if(!tl(t))return!1;var e=el(t);return e==nl||e==il||e==rl||e==sl}Zn.exports=ol});var ti=a((db,ei)=>{var al=ee(),ul=al["__core-js_shared__"];ei.exports=ul});var ii=a((pb,ni)=>{var zt=ti(),ri=function(){var t=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function cl(t){return!!ri&&ri in t}ni.exports=cl});var Ht=a((hb,si)=>{var ll=Function.prototype,fl=ll.toString;function dl(t){if(t!=null){try{return fl.call(t)}catch{}try{return t+""}catch{}}return""}si.exports=dl});var ai=a((mb,oi)=>{var pl=Ft(),hl=ii(),ml=mt(),gl=Ht(),yl=/[\\^$.*+?()[\]{}|]/g,bl=/^\[object .+?Constructor\]$/,vl=Function.prototype,_l=Object.prototype,wl=vl.toString,xl=_l.hasOwnProperty,Sl=RegExp("^"+wl.call(xl).replace(yl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tl(t){if(!ml(t)||hl(t))return!1;var e=pl(t)?Sl:bl;return e.test(gl(t))}oi.exports=Tl});var ci=a((gb,ui)=>{function Pl(t,e){return t?.[e]}ui.exports=Pl});var fe=a((yb,li)=>{var ql=ai(),El=ci();function Rl(t,e){var r=El(t,e);return ql(r)?r:void 0}li.exports=Rl});var di=a((bb,fi)=>{var kl=fe(),Ml=function(){try{var t=kl(Object,"defineProperty");return t({},"",{}),t}catch{}}();fi.exports=Ml});var mi=a((vb,hi)=>{var pi=di();function Ol(t,e,r){e=="__proto__"&&pi?pi(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}hi.exports=Ol});var yi=a((_b,gi)=>{function Cl(t){return function(e,r,n){for(var i=-1,o=Object(e),l=n(e),d=l.length;d--;){var g=l[t?d:++i];if(r(o[g],g,o)===!1)break}return e}}gi.exports=Cl});var vi=a((wb,bi)=>{var Nl=yi(),Al=Nl();bi.exports=Al});var wi=a((xb,_i)=>{function jl(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}_i.exports=jl});var ke=a((Sb,xi)=>{function Ll(t){return t!=null&&typeof t=="object"}xi.exports=Ll});var Ti=a((Tb,Si)=>{var Il=Re(),$l=ke(),Dl="[object Arguments]";function Fl(t){return $l(t)&&Il(t)==Dl}Si.exports=Fl});var Wt=a((Pb,Ei)=>{var Pi=Ti(),zl=ke(),qi=Object.prototype,Hl=qi.hasOwnProperty,Wl=qi.propertyIsEnumerable,Ul=Pi(function(){return arguments}())?Pi:function(t){return zl(t)&&Hl.call(t,"callee")&&!Wl.call(t,"callee")};Ei.exports=Ul});var ie=a((qb,Ri)=>{var Bl=Array.isArray;Ri.exports=Bl});var Mi=a((Eb,ki)=>{function Gl(){return!1}ki.exports=Gl});var Ut=a((Ve,Me)=>{var Jl=ee(),Kl=Mi(),Ni=typeof Ve=="object"&&Ve&&!Ve.nodeType&&Ve,Oi=Ni&&typeof Me=="object"&&Me&&!Me.nodeType&&Me,Vl=Oi&&Oi.exports===Ni,Ci=Vl?Jl.Buffer:void 0,Ql=Ci?Ci.isBuffer:void 0,Xl=Ql||Kl;Me.exports=Xl});var Bt=a((Rb,Ai)=>{var Yl=9007199254740991,Zl=/^(?:0|[1-9]\d*)$/;function ef(t,e){var r=typeof t;return e=e??Yl,!!e&&(r=="number"||r!="symbol"&&Zl.test(t))&&t>-1&&t%1==0&&t<e}Ai.exports=ef});var gt=a((kb,ji)=>{var tf=9007199254740991;function rf(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=tf}ji.exports=rf});var Ii=a((Mb,Li)=>{var nf=Re(),sf=gt(),of=ke(),af="[object Arguments]",uf="[object Array]",cf="[object Boolean]",lf="[object Date]",ff="[object Error]",df="[object Function]",pf="[object Map]",hf="[object Number]",mf="[object Object]",gf="[object RegExp]",yf="[object Set]",bf="[object String]",vf="[object WeakMap]",_f="[object ArrayBuffer]",wf="[object DataView]",xf="[object Float32Array]",Sf="[object Float64Array]",Tf="[object Int8Array]",Pf="[object Int16Array]",qf="[object Int32Array]",Ef="[object Uint8Array]",Rf="[object Uint8ClampedArray]",kf="[object Uint16Array]",Mf="[object Uint32Array]",N={};N[xf]=N[Sf]=N[Tf]=N[Pf]=N[qf]=N[Ef]=N[Rf]=N[kf]=N[Mf]=!0;N[af]=N[uf]=N[_f]=N[cf]=N[wf]=N[lf]=N[ff]=N[df]=N[pf]=N[hf]=N[mf]=N[gf]=N[yf]=N[bf]=N[vf]=!1;function Of(t){return of(t)&&sf(t.length)&&!!N[nf(t)]}Li.exports=Of});var Di=a((Ob,$i)=>{function Cf(t){return function(e){return t(e)}}$i.exports=Cf});var zi=a((Qe,Oe)=>{var Nf=Dt(),Fi=typeof Qe=="object"&&Qe&&!Qe.nodeType&&Qe,Xe=Fi&&typeof Oe=="object"&&Oe&&!Oe.nodeType&&Oe,Af=Xe&&Xe.exports===Fi,Gt=Af&&Nf.process,jf=function(){try{var t=Xe&&Xe.require&&Xe.require("util").types;return t||Gt&&Gt.binding&&Gt.binding("util")}catch{}}();Oe.exports=jf});var Jt=a((Cb,Ui)=>{var Lf=Ii(),If=Di(),Hi=zi(),Wi=Hi&&Hi.isTypedArray,$f=Wi?If(Wi):Lf;Ui.exports=$f});var Gi=a((Nb,Bi)=>{var Df=wi(),Ff=Wt(),zf=ie(),Hf=Ut(),Wf=Bt(),Uf=Jt(),Bf=Object.prototype,Gf=Bf.hasOwnProperty;function Jf(t,e){var r=zf(t),n=!r&&Ff(t),i=!r&&!n&&Hf(t),o=!r&&!n&&!i&&Uf(t),l=r||n||i||o,d=l?Df(t.length,String):[],g=d.length;for(var h in t)(e||Gf.call(t,h))&&!(l&&(h=="length"||i&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Wf(h,g)))&&d.push(h);return d}Bi.exports=Jf});var Ki=a((Ab,Ji)=>{var Kf=Object.prototype;function Vf(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Kf;return t===r}Ji.exports=Vf});var Qi=a((jb,Vi)=>{function Qf(t,e){return function(r){return t(e(r))}}Vi.exports=Qf});var Yi=a((Lb,Xi)=>{var Xf=Qi(),Yf=Xf(Object.keys,Object);Xi.exports=Yf});var es=a((Ib,Zi)=>{var Zf=Ki(),ed=Yi(),td=Object.prototype,rd=td.hasOwnProperty;function nd(t){if(!Zf(t))return ed(t);var e=[];for(var r in Object(t))rd.call(t,r)&&r!="constructor"&&e.push(r);return e}Zi.exports=nd});var rs=a(($b,ts)=>{var id=Ft(),sd=gt();function od(t){return t!=null&&sd(t.length)&&!id(t)}ts.exports=od});var yt=a((Db,ns)=>{var ad=Gi(),ud=es(),cd=rs();function ld(t){return cd(t)?ad(t):ud(t)}ns.exports=ld});var ss=a((Fb,is)=>{var fd=vi(),dd=yt();function pd(t,e){return t&&fd(t,e,dd)}is.exports=pd});var as=a((zb,os)=>{function hd(){this.__data__=[],this.size=0}os.exports=hd});var Kt=a((Hb,us)=>{function md(t,e){return t===e||t!==t&&e!==e}us.exports=md});var Ye=a((Wb,cs)=>{var gd=Kt();function yd(t,e){for(var r=t.length;r--;)if(gd(t[r][0],e))return r;return-1}cs.exports=yd});var fs=a((Ub,ls)=>{var bd=Ye(),vd=Array.prototype,_d=vd.splice;function wd(t){var e=this.__data__,r=bd(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():_d.call(e,r,1),--this.size,!0}ls.exports=wd});var ps=a((Bb,ds)=>{var xd=Ye();function Sd(t){var e=this.__data__,r=xd(e,t);return r<0?void 0:e[r][1]}ds.exports=Sd});var ms=a((Gb,hs)=>{var Td=Ye();function Pd(t){return Td(this.__data__,t)>-1}hs.exports=Pd});var ys=a((Jb,gs)=>{var qd=Ye();function Ed(t,e){var r=this.__data__,n=qd(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}gs.exports=Ed});var Ze=a((Kb,bs)=>{var Rd=as(),kd=fs(),Md=ps(),Od=ms(),Cd=ys();function Ce(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ce.prototype.clear=Rd;Ce.prototype.delete=kd;Ce.prototype.get=Md;Ce.prototype.has=Od;Ce.prototype.set=Cd;bs.exports=Ce});var _s=a((Vb,vs)=>{var Nd=Ze();function Ad(){this.__data__=new Nd,this.size=0}vs.exports=Ad});var xs=a((Qb,ws)=>{function jd(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}ws.exports=jd});var Ts=a((Xb,Ss)=>{function Ld(t){return this.__data__.get(t)}Ss.exports=Ld});var qs=a((Yb,Ps)=>{function Id(t){return this.__data__.has(t)}Ps.exports=Id});var bt=a((Zb,Es)=>{var $d=fe(),Dd=ee(),Fd=$d(Dd,"Map");Es.exports=Fd});var et=a((ev,Rs)=>{var zd=fe(),Hd=zd(Object,"create");Rs.exports=Hd});var Os=a((tv,Ms)=>{var ks=et();function Wd(){this.__data__=ks?ks(null):{},this.size=0}Ms.exports=Wd});var Ns=a((rv,Cs)=>{function Ud(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}Cs.exports=Ud});var js=a((nv,As)=>{var Bd=et(),Gd="__lodash_hash_undefined__",Jd=Object.prototype,Kd=Jd.hasOwnProperty;function Vd(t){var e=this.__data__;if(Bd){var r=e[t];return r===Gd?void 0:r}return Kd.call(e,t)?e[t]:void 0}As.exports=Vd});var Is=a((iv,Ls)=>{var Qd=et(),Xd=Object.prototype,Yd=Xd.hasOwnProperty;function Zd(t){var e=this.__data__;return Qd?e[t]!==void 0:Yd.call(e,t)}Ls.exports=Zd});var Ds=a((sv,$s)=>{var ep=et(),tp="__lodash_hash_undefined__";function rp(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ep&&e===void 0?tp:e,this}$s.exports=rp});var zs=a((ov,Fs)=>{var np=Os(),ip=Ns(),sp=js(),op=Is(),ap=Ds();function Ne(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ne.prototype.clear=np;Ne.prototype.delete=ip;Ne.prototype.get=sp;Ne.prototype.has=op;Ne.prototype.set=ap;Fs.exports=Ne});var Us=a((av,Ws)=>{var Hs=zs(),up=Ze(),cp=bt();function lp(){this.size=0,this.__data__={hash:new Hs,map:new(cp||up),string:new Hs}}Ws.exports=lp});var Gs=a((uv,Bs)=>{function fp(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}Bs.exports=fp});var tt=a((cv,Js)=>{var dp=Gs();function pp(t,e){var r=t.__data__;return dp(e)?r[typeof e=="string"?"string":"hash"]:r.map}Js.exports=pp});var Vs=a((lv,Ks)=>{var hp=tt();function mp(t){var e=hp(this,t).delete(t);return this.size-=e?1:0,e}Ks.exports=mp});var Xs=a((fv,Qs)=>{var gp=tt();function yp(t){return gp(this,t).get(t)}Qs.exports=yp});var Zs=a((dv,Ys)=>{var bp=tt();function vp(t){return bp(this,t).has(t)}Ys.exports=vp});var to=a((pv,eo)=>{var _p=tt();function wp(t,e){var r=_p(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}eo.exports=wp});var vt=a((hv,ro)=>{var xp=Us(),Sp=Vs(),Tp=Xs(),Pp=Zs(),qp=to();function Ae(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ae.prototype.clear=xp;Ae.prototype.delete=Sp;Ae.prototype.get=Tp;Ae.prototype.has=Pp;Ae.prototype.set=qp;ro.exports=Ae});var io=a((mv,no)=>{var Ep=Ze(),Rp=bt(),kp=vt(),Mp=200;function Op(t,e){var r=this.__data__;if(r instanceof Ep){var n=r.__data__;if(!Rp||n.length<Mp-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new kp(n)}return r.set(t,e),this.size=r.size,this}no.exports=Op});var Vt=a((gv,so)=>{var Cp=Ze(),Np=_s(),Ap=xs(),jp=Ts(),Lp=qs(),Ip=io();function je(t){var e=this.__data__=new Cp(t);this.size=e.size}je.prototype.clear=Np;je.prototype.delete=Ap;je.prototype.get=jp;je.prototype.has=Lp;je.prototype.set=Ip;so.exports=je});var ao=a((yv,oo)=>{var $p="__lodash_hash_undefined__";function Dp(t){return this.__data__.set(t,$p),this}oo.exports=Dp});var co=a((bv,uo)=>{function Fp(t){return this.__data__.has(t)}uo.exports=Fp});var fo=a((vv,lo)=>{var zp=vt(),Hp=ao(),Wp=co();function _t(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new zp;++e<r;)this.add(t[e])}_t.prototype.add=_t.prototype.push=Hp;_t.prototype.has=Wp;lo.exports=_t});var ho=a((_v,po)=>{function Up(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}po.exports=Up});var go=a((wv,mo)=>{function Bp(t,e){return t.has(e)}mo.exports=Bp});var Qt=a((xv,yo)=>{var Gp=fo(),Jp=ho(),Kp=go(),Vp=1,Qp=2;function Xp(t,e,r,n,i,o){var l=r&Vp,d=t.length,g=e.length;if(d!=g&&!(l&&g>d))return!1;var h=o.get(t),E=o.get(e);if(h&&E)return h==e&&E==t;var P=-1,w=!0,H=r&Qp?new Gp:void 0;for(o.set(t,e),o.set(e,t);++P<d;){var j=t[P],v=e[P];if(n)var R=l?n(v,j,P,e,t,o):n(j,v,P,t,e,o);if(R!==void 0){if(R)continue;w=!1;break}if(H){if(!Jp(e,function(L,D){if(!Kp(H,D)&&(j===L||i(j,L,r,n,o)))return H.push(D)})){w=!1;break}}else if(!(j===v||i(j,v,r,n,o))){w=!1;break}}return o.delete(t),o.delete(e),w}yo.exports=Xp});var vo=a((Sv,bo)=>{var Yp=ee(),Zp=Yp.Uint8Array;bo.exports=Zp});var wo=a((Tv,_o)=>{function eh(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}_o.exports=eh});var So=a((Pv,xo)=>{function th(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}xo.exports=th});var Ro=a((qv,Eo)=>{var To=Je(),Po=vo(),rh=Kt(),nh=Qt(),ih=wo(),sh=So(),oh=1,ah=2,uh="[object Boolean]",ch="[object Date]",lh="[object Error]",fh="[object Map]",dh="[object Number]",ph="[object RegExp]",hh="[object Set]",mh="[object String]",gh="[object Symbol]",yh="[object ArrayBuffer]",bh="[object DataView]",qo=To?To.prototype:void 0,Xt=qo?qo.valueOf:void 0;function vh(t,e,r,n,i,o,l){switch(r){case bh:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case yh:return!(t.byteLength!=e.byteLength||!o(new Po(t),new Po(e)));case uh:case ch:case dh:return rh(+t,+e);case lh:return t.name==e.name&&t.message==e.message;case ph:case mh:return t==e+"";case fh:var d=ih;case hh:var g=n&oh;if(d||(d=sh),t.size!=e.size&&!g)return!1;var h=l.get(t);if(h)return h==e;n|=ah,l.set(t,e);var E=nh(d(t),d(e),n,i,o,l);return l.delete(t),E;case gh:if(Xt)return Xt.call(t)==Xt.call(e)}return!1}Eo.exports=vh});var Mo=a((Ev,ko)=>{function _h(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}ko.exports=_h});var Co=a((Rv,Oo)=>{var wh=Mo(),xh=ie();function Sh(t,e,r){var n=e(t);return xh(t)?n:wh(n,r(t))}Oo.exports=Sh});var Ao=a((kv,No)=>{function Th(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var l=t[r];e(l,r,t)&&(o[i++]=l)}return o}No.exports=Th});var Lo=a((Mv,jo)=>{function Ph(){return[]}jo.exports=Ph});var Do=a((Ov,$o)=>{var qh=Ao(),Eh=Lo(),Rh=Object.prototype,kh=Rh.propertyIsEnumerable,Io=Object.getOwnPropertySymbols,Mh=Io?function(t){return t==null?[]:(t=Object(t),qh(Io(t),function(e){return kh.call(t,e)}))}:Eh;$o.exports=Mh});var zo=a((Cv,Fo)=>{var Oh=Co(),Ch=Do(),Nh=yt();function Ah(t){return Oh(t,Nh,Ch)}Fo.exports=Ah});var Uo=a((Nv,Wo)=>{var Ho=zo(),jh=1,Lh=Object.prototype,Ih=Lh.hasOwnProperty;function $h(t,e,r,n,i,o){var l=r&jh,d=Ho(t),g=d.length,h=Ho(e),E=h.length;if(g!=E&&!l)return!1;for(var P=g;P--;){var w=d[P];if(!(l?w in e:Ih.call(e,w)))return!1}var H=o.get(t),j=o.get(e);if(H&&j)return H==e&&j==t;var v=!0;o.set(t,e),o.set(e,t);for(var R=l;++P<g;){w=d[P];var L=t[w],D=e[w];if(n)var x=l?n(D,L,w,e,t,o):n(L,D,w,t,e,o);if(!(x===void 0?L===D||i(L,D,r,n,o):x)){v=!1;break}R||(R=w=="constructor")}if(v&&!R){var V=t.constructor,k=e.constructor;V!=k&&"constructor"in t&&"constructor"in e&&!(typeof V=="function"&&V instanceof V&&typeof k=="function"&&k instanceof k)&&(v=!1)}return o.delete(t),o.delete(e),v}Wo.exports=$h});var Go=a((Av,Bo)=>{var Dh=fe(),Fh=ee(),zh=Dh(Fh,"DataView");Bo.exports=zh});var Ko=a((jv,Jo)=>{var Hh=fe(),Wh=ee(),Uh=Hh(Wh,"Promise");Jo.exports=Uh});var Qo=a((Lv,Vo)=>{var Bh=fe(),Gh=ee(),Jh=Bh(Gh,"Set");Vo.exports=Jh});var Yo=a((Iv,Xo)=>{var Kh=fe(),Vh=ee(),Qh=Kh(Vh,"WeakMap");Xo.exports=Qh});var oa=a(($v,sa)=>{var Yt=Go(),Zt=bt(),er=Ko(),tr=Qo(),rr=Yo(),ia=Re(),Le=Ht(),Zo="[object Map]",Xh="[object Object]",ea="[object Promise]",ta="[object Set]",ra="[object WeakMap]",na="[object DataView]",Yh=Le(Yt),Zh=Le(Zt),em=Le(er),tm=Le(tr),rm=Le(rr),ge=ia;(Yt&&ge(new Yt(new ArrayBuffer(1)))!=na||Zt&&ge(new Zt)!=Zo||er&&ge(er.resolve())!=ea||tr&&ge(new tr)!=ta||rr&&ge(new rr)!=ra)&&(ge=function(t){var e=ia(t),r=e==Xh?t.constructor:void 0,n=r?Le(r):"";if(n)switch(n){case Yh:return na;case Zh:return Zo;case em:return ea;case tm:return ta;case rm:return ra}return e});sa.exports=ge});var ha=a((Dv,pa)=>{var nr=Vt(),nm=Qt(),im=Ro(),sm=Uo(),aa=oa(),ua=ie(),ca=Ut(),om=Jt(),am=1,la="[object Arguments]",fa="[object Array]",wt="[object Object]",um=Object.prototype,da=um.hasOwnProperty;function cm(t,e,r,n,i,o){var l=ua(t),d=ua(e),g=l?fa:aa(t),h=d?fa:aa(e);g=g==la?wt:g,h=h==la?wt:h;var E=g==wt,P=h==wt,w=g==h;if(w&&ca(t)){if(!ca(e))return!1;l=!0,E=!1}if(w&&!E)return o||(o=new nr),l||om(t)?nm(t,e,r,n,i,o):im(t,e,g,r,n,i,o);if(!(r&am)){var H=E&&da.call(t,"__wrapped__"),j=P&&da.call(e,"__wrapped__");if(H||j){var v=H?t.value():t,R=j?e.value():e;return o||(o=new nr),i(v,R,r,n,o)}}return w?(o||(o=new nr),sm(t,e,r,n,i,o)):!1}pa.exports=cm});var ir=a((Fv,ya)=>{var lm=ha(),ma=ke();function ga(t,e,r,n,i){return t===e?!0:t==null||e==null||!ma(t)&&!ma(e)?t!==t&&e!==e:lm(t,e,r,n,ga,i)}ya.exports=ga});var va=a((zv,ba)=>{var fm=Vt(),dm=ir(),pm=1,hm=2;function mm(t,e,r,n){var i=r.length,o=i,l=!n;if(t==null)return!o;for(t=Object(t);i--;){var d=r[i];if(l&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++i<o;){d=r[i];var g=d[0],h=t[g],E=d[1];if(l&&d[2]){if(h===void 0&&!(g in t))return!1}else{var P=new fm;if(n)var w=n(h,E,g,t,e,P);if(!(w===void 0?dm(E,h,pm|hm,n,P):w))return!1}}return!0}ba.exports=mm});var sr=a((Hv,_a)=>{var gm=mt();function ym(t){return t===t&&!gm(t)}_a.exports=ym});var xa=a((Wv,wa)=>{var bm=sr(),vm=yt();function _m(t){for(var e=vm(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,bm(i)]}return e}wa.exports=_m});var or=a((Uv,Sa)=>{function wm(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}Sa.exports=wm});var Pa=a((Bv,Ta)=>{var xm=va(),Sm=xa(),Tm=or();function Pm(t){var e=Sm(t);return e.length==1&&e[0][2]?Tm(e[0][0],e[0][1]):function(r){return r===t||xm(r,t,e)}}Ta.exports=Pm});var xt=a((Gv,qa)=>{var qm=Re(),Em=ke(),Rm="[object Symbol]";function km(t){return typeof t=="symbol"||Em(t)&&qm(t)==Rm}qa.exports=km});var St=a((Jv,Ea)=>{var Mm=ie(),Om=xt(),Cm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nm=/^\w*$/;function Am(t,e){if(Mm(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Om(t)?!0:Nm.test(t)||!Cm.test(t)||e!=null&&t in Object(e)}Ea.exports=Am});var Ma=a((Kv,ka)=>{var Ra=vt(),jm="Expected a function";function ar(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(jm);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var l=t.apply(this,n);return r.cache=o.set(i,l)||o,l};return r.cache=new(ar.Cache||Ra),r}ar.Cache=Ra;ka.exports=ar});var Ca=a((Vv,Oa)=>{var Lm=Ma(),Im=500;function $m(t){var e=Lm(t,function(n){return r.size===Im&&r.clear(),n}),r=e.cache;return e}Oa.exports=$m});var Aa=a((Qv,Na)=>{var Dm=Ca(),Fm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zm=/\\(\\)?/g,Hm=Dm(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Fm,function(r,n,i,o){e.push(i?o.replace(zm,"$1"):n||r)}),e});Na.exports=Hm});var La=a((Xv,ja)=>{function Wm(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}ja.exports=Wm});var Ha=a((Yv,za)=>{var Ia=Je(),Um=La(),Bm=ie(),Gm=xt(),Jm=1/0,$a=Ia?Ia.prototype:void 0,Da=$a?$a.toString:void 0;function Fa(t){if(typeof t=="string")return t;if(Bm(t))return Um(t,Fa)+"";if(Gm(t))return Da?Da.call(t):"";var e=t+"";return e=="0"&&1/t==-Jm?"-0":e}za.exports=Fa});var Ua=a((Zv,Wa)=>{var Km=Ha();function Vm(t){return t==null?"":Km(t)}Wa.exports=Vm});var ur=a((e_,Ba)=>{var Qm=ie(),Xm=St(),Ym=Aa(),Zm=Ua();function eg(t,e){return Qm(t)?t:Xm(t,e)?[t]:Ym(Zm(t))}Ba.exports=eg});var rt=a((t_,Ga)=>{var tg=xt(),rg=1/0;function ng(t){if(typeof t=="string"||tg(t))return t;var e=t+"";return e=="0"&&1/t==-rg?"-0":e}Ga.exports=ng});var cr=a((r_,Ja)=>{var ig=ur(),sg=rt();function og(t,e){e=ig(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[sg(e[r++])];return r&&r==n?t:void 0}Ja.exports=og});var Va=a((n_,Ka)=>{var ag=cr();function ug(t,e,r){var n=t==null?void 0:ag(t,e);return n===void 0?r:n}Ka.exports=ug});var Xa=a((i_,Qa)=>{function cg(t,e){return t!=null&&e in Object(t)}Qa.exports=cg});var Za=a((s_,Ya)=>{var lg=ur(),fg=Wt(),dg=ie(),pg=Bt(),hg=gt(),mg=rt();function gg(t,e,r){e=lg(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var l=mg(e[n]);if(!(o=t!=null&&r(t,l)))break;t=t[l]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&hg(i)&&pg(l,i)&&(dg(t)||fg(t)))}Ya.exports=gg});var tu=a((o_,eu)=>{var yg=Xa(),bg=Za();function vg(t,e){return t!=null&&bg(t,e,yg)}eu.exports=vg});var nu=a((a_,ru)=>{var _g=ir(),wg=Va(),xg=tu(),Sg=St(),Tg=sr(),Pg=or(),qg=rt(),Eg=1,Rg=2;function kg(t,e){return Sg(t)&&Tg(e)?Pg(qg(t),e):function(r){var n=wg(r,t);return n===void 0&&n===e?xg(r,t):_g(e,n,Eg|Rg)}}ru.exports=kg});var su=a((u_,iu)=>{function Mg(t){return t}iu.exports=Mg});var au=a((c_,ou)=>{function Og(t){return function(e){return e?.[t]}}ou.exports=Og});var cu=a((l_,uu)=>{var Cg=cr();function Ng(t){return function(e){return Cg(e,t)}}uu.exports=Ng});var fu=a((f_,lu)=>{var Ag=au(),jg=cu(),Lg=St(),Ig=rt();function $g(t){return Lg(t)?Ag(Ig(t)):jg(t)}lu.exports=$g});var pu=a((d_,du)=>{var Dg=Pa(),Fg=nu(),zg=su(),Hg=ie(),Wg=fu();function Ug(t){return typeof t=="function"?t:t==null?zg:typeof t=="object"?Hg(t)?Fg(t[0],t[1]):Dg(t):Wg(t)}du.exports=Ug});var mu=a((p_,hu)=>{var Bg=mi(),Gg=ss(),Jg=pu();function Kg(t,e){var r={};return e=Jg(e,3),Gg(t,function(n,i,o){Bg(r,i,e(n,i,o))}),r}hu.exports=Kg});var yu=a((h_,gu)=>{"use strict";var Vg=/[|\\{}()[\]^$+*?.-]/g;gu.exports=t=>{if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(Vg,"\\$&")}});var wu=a((m_,_u)=>{"use strict";var Qg=yu(),Xg=typeof process=="object"&&process&&typeof process.cwd=="function"?process.cwd():".",vu=[].concat(require("module").builtinModules,"bootstrap_node","node").map(t=>new RegExp(`(?:\\((?:node:)?${t}(?:\\.js)?:\\d+:\\d+\\)$|^\\s*at (?:node:)?${t}(?:\\.js)?:\\d+:\\d+$)`));vu.push(/\((?:node:)?internal\/[^:]+:\d+:\d+\)$/,/\s*at (?:node:)?internal\/[^:]+:\d+:\d+$/,/\/\.node-spawn-wrap-\w+-\w+\/node:\d+:\d+\)?$/);var nt=class{constructor(e){e={ignoredPackages:[],...e},"internals"in e||(e.internals=nt.nodeInternals()),"cwd"in e||(e.cwd=Xg),this._cwd=e.cwd.replace(/\\/g,"/"),this._internals=[].concat(e.internals,Yg(e.ignoredPackages)),this._wrapCallSite=e.wrapCallSite||!1}static nodeInternals(){return[...vu]}clean(e,r=0){r=" ".repeat(r),Array.isArray(e)||(e=e.split(`
`)),!/^\s*at /.test(e[0])&&/^\s*at /.test(e[1])&&(e=e.slice(1));let n=!1,i=null,o=[];return e.forEach(l=>{if(l=l.replace(/\\/g,"/"),this._internals.some(g=>g.test(l)))return;let d=/^\s*at /.test(l);n?l=l.trimEnd().replace(/^(\s+)at /,"$1"):(l=l.trim(),d&&(l=l.slice(3))),l=l.replace(`${this._cwd}/`,""),l&&(d?(i&&(o.push(i),i=null),o.push(l)):(n=!0,i=l))}),o.map(l=>`${r}${l}
`).join("")}captureString(e,r=this.captureString){typeof e=="function"&&(r=e,e=1/0);let{stackTraceLimit:n}=Error;e&&(Error.stackTraceLimit=e);let i={};Error.captureStackTrace(i,r);let{stack:o}=i;return Error.stackTraceLimit=n,this.clean(o)}capture(e,r=this.capture){typeof e=="function"&&(r=e,e=1/0);let{prepareStackTrace:n,stackTraceLimit:i}=Error;Error.prepareStackTrace=(d,g)=>this._wrapCallSite?g.map(this._wrapCallSite):g,e&&(Error.stackTraceLimit=e);let o={};Error.captureStackTrace(o,r);let{stack:l}=o;return Object.assign(Error,{prepareStackTrace:n,stackTraceLimit:i}),l}at(e=this.at){let[r]=this.capture(1,e);if(!r)return{};let n={line:r.getLineNumber(),column:r.getColumnNumber()};bu(n,r.getFileName(),this._cwd),r.isConstructor()&&(n.constructor=!0),r.isEval()&&(n.evalOrigin=r.getEvalOrigin()),r.isNative()&&(n.native=!0);let i;try{i=r.getTypeName()}catch{}i&&i!=="Object"&&i!=="[object Object]"&&(n.type=i);let o=r.getFunctionName();o&&(n.function=o);let l=r.getMethodName();return l&&o!==l&&(n.method=l),n}parseLine(e){let r=e&&e.match(Zg);if(!r)return null;let n=r[1]==="new",i=r[2],o=r[3],l=r[4],d=Number(r[5]),g=Number(r[6]),h=r[7],E=r[8],P=r[9],w=r[10]==="native",H=r[11]===")",j,v={};if(E&&(v.line=Number(E)),P&&(v.column=Number(P)),H&&h){let R=0;for(let L=h.length-1;L>0;L--)if(h.charAt(L)===")")R++;else if(h.charAt(L)==="("&&h.charAt(L-1)===" "&&(R--,R===-1&&h.charAt(L-1)===" ")){let D=h.slice(0,L-1);h=h.slice(L+1),i+=` (${D}`;break}}if(i){let R=i.match(ey);R&&(i=R[1],j=R[2])}return bu(v,h,this._cwd),n&&(v.constructor=!0),o&&(v.evalOrigin=o,v.evalLine=d,v.evalColumn=g,v.evalFile=l&&l.replace(/\\/g,"/")),w&&(v.native=!0),i&&(v.function=i),j&&i!==j&&(v.method=j),v}};function bu(t,e,r){e&&(e=e.replace(/\\/g,"/"),e.startsWith(`${r}/`)&&(e=e.slice(r.length+1)),t.file=e)}function Yg(t){if(t.length===0)return[];let e=t.map(r=>Qg(r));return new RegExp(`[/\\\\]node_modules[/\\\\](?:${e.join("|")})[/\\\\][^:]+:\\d+:\\d+`)}var Zg=new RegExp("^(?:\\s*at )?(?:(new) )?(?:(.*?) \\()?(?:eval at ([^ ]+) \\((.+?):(\\d+):(\\d+)\\), )?(?:(.+?):(\\d+):(\\d+)|(native))(\\)?)$"),ey=/^(.*?) \[as (.*?)\]$/;_u.exports=nt});var se=a(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});var wr;function xr(){if(wr===void 0)throw new Error("No runtime abstraction layer installed");return wr}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");wr=r}t.install=e})(xr||(xr={}));Sr.default=xr});var Tr=a(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.Disposable=void 0;var yy;(function(t){function e(r){return{dispose:r}}t.create=e})(yy=ot.Disposable||(ot.Disposable={}))});var Lu=a(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.AbstractMessageBuffer=void 0;var by=13,vy=10,_y=`\r
`,Pr=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){let g=this._chunks[r];n=0;t:for(;n<g.length;){switch(g[n]){case by:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case vy:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=g.byteLength,r++}if(e!==4)return;let o=this._read(i+n),l=new Map,d=this.toString(o,"ascii").split(_y);if(d.length<2)return l;for(let g=0;g<d.length-2;g++){let h=d[g],E=h.indexOf(":");if(E===-1)throw new Error("Message header must separate key and value using :");let P=h.substr(0,E),w=h.substr(E+1).trim();l.set(P,w)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],l=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,l}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let l=o.slice(0,e);r.set(l,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};qt.AbstractMessageBuffer=Pr});var Du=a(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});var wy=se(),Iu=require("util"),ve=Tr(),xy=Lu(),$e=class extends xy.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return $e.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new Iu.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};$e.emptyBuffer=Buffer.allocUnsafe(0);var qr=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ve.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ve.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ve.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ve.Disposable.create(()=>this.stream.off("data",e))}},Er=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ve.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ve.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ve.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=l=>{l==null?n():i(l)};typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},$u=Object.freeze({messageBuffer:Object.freeze({create:t=>new $e(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Iu.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new qr(t),asWritableStream:t=>new Er(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:()=>clearImmediate(r)}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:()=>clearInterval(n)}}})});function Rr(){return $u}(function(t){function e(){wy.default.install($u)}t.install=e})(Rr||(Rr={}));kr.default=Rr});var De=a(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.stringArray=G.array=G.func=G.error=G.number=G.string=G.boolean=void 0;function Sy(t){return t===!0||t===!1}G.boolean=Sy;function Fu(t){return typeof t=="string"||t instanceof String}G.string=Fu;function Ty(t){return typeof t=="number"||t instanceof Number}G.number=Ty;function Py(t){return t instanceof Error}G.error=Py;function qy(t){return typeof t=="function"}G.func=qy;function zu(t){return Array.isArray(t)}G.array=zu;function Ey(t){return zu(t)&&t.every(e=>Fu(e))}G.stringArray=Ey});var Yr=a(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.Message=m.NotificationType9=m.NotificationType8=m.NotificationType7=m.NotificationType6=m.NotificationType5=m.NotificationType4=m.NotificationType3=m.NotificationType2=m.NotificationType1=m.NotificationType0=m.NotificationType=m.RequestType9=m.RequestType8=m.RequestType7=m.RequestType6=m.RequestType5=m.RequestType4=m.RequestType3=m.RequestType2=m.RequestType1=m.RequestType=m.RequestType0=m.AbstractMessageSignature=m.ParameterStructures=m.ResponseError=m.ErrorCodes=void 0;var _e=De(),Hu;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Hu=m.ErrorCodes||(m.ErrorCodes={}));var at=class extends Error{constructor(e,r,n){super(r),this.code=_e.number(e)?e:Hu.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,at.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};m.ResponseError=at;var B=class{constructor(e){this.kind=e}static is(e){return e===B.auto||e===B.byName||e===B.byPosition}toString(){return this.kind}};m.ParameterStructures=B;B.auto=new B("auto");B.byPosition=new B("byPosition");B.byName=new B("byName");var A=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return B.auto}};m.AbstractMessageSignature=A;var Mr=class extends A{constructor(e){super(e,0)}};m.RequestType0=Mr;var Or=class extends A{constructor(e,r=B.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};m.RequestType=Or;var Cr=class extends A{constructor(e,r=B.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};m.RequestType1=Cr;var Nr=class extends A{constructor(e){super(e,2)}};m.RequestType2=Nr;var Ar=class extends A{constructor(e){super(e,3)}};m.RequestType3=Ar;var jr=class extends A{constructor(e){super(e,4)}};m.RequestType4=jr;var Lr=class extends A{constructor(e){super(e,5)}};m.RequestType5=Lr;var Ir=class extends A{constructor(e){super(e,6)}};m.RequestType6=Ir;var $r=class extends A{constructor(e){super(e,7)}};m.RequestType7=$r;var Dr=class extends A{constructor(e){super(e,8)}};m.RequestType8=Dr;var Fr=class extends A{constructor(e){super(e,9)}};m.RequestType9=Fr;var zr=class extends A{constructor(e,r=B.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};m.NotificationType=zr;var Hr=class extends A{constructor(e){super(e,0)}};m.NotificationType0=Hr;var Wr=class extends A{constructor(e,r=B.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};m.NotificationType1=Wr;var Ur=class extends A{constructor(e){super(e,2)}};m.NotificationType2=Ur;var Br=class extends A{constructor(e){super(e,3)}};m.NotificationType3=Br;var Gr=class extends A{constructor(e){super(e,4)}};m.NotificationType4=Gr;var Jr=class extends A{constructor(e){super(e,5)}};m.NotificationType5=Jr;var Kr=class extends A{constructor(e){super(e,6)}};m.NotificationType6=Kr;var Vr=class extends A{constructor(e){super(e,7)}};m.NotificationType7=Vr;var Qr=class extends A{constructor(e){super(e,8)}};m.NotificationType8=Qr;var Xr=class extends A{constructor(e){super(e,9)}};m.NotificationType9=Xr;var Ry;(function(t){function e(i){let o=i;return o&&_e.string(o.method)&&(_e.string(o.id)||_e.number(o.id))}t.isRequest=e;function r(i){let o=i;return o&&_e.string(o.method)&&i.id===void 0}t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(_e.string(o.id)||_e.number(o.id)||o.id===null)}t.isResponse=n})(Ry=m.Message||(m.Message={}))});var en=a(oe=>{"use strict";var Wu;Object.defineProperty(oe,"__esModule",{value:!0});oe.LRUCache=oe.LinkedMap=oe.Touch=void 0;var K;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(K=oe.Touch||(oe.Touch={}));var Et=class{constructor(){this[Wu]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=K.None){let n=this._map.get(e);if(!!n)return r!==K.None&&this.touch(n,r),n.value}set(e,r,n=K.None){let i=this._map.get(e);if(i)i.value=r,n!==K.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case K.None:this.addItemLast(i);break;case K.First:this.addItemFirst(i);break;case K.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}[(Wu=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==K.First&&r!==K.Last)){if(r===K.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===K.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};oe.LinkedMap=Et;var Zr=class extends Et{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=K.AsNew){return super.get(e,r)}peek(e){return super.get(e,K.None)}set(e,r){return super.set(e,r,K.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};oe.LRUCache=Zr});var ze=a(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.Emitter=we.Event=void 0;var ky=se(),My;(function(t){let e={dispose(){}};t.None=function(){return e}})(My=we.Event||(we.Event={}));var tn=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,l=n.length;o<l;o++)try{r.push(n[o].apply(i[o],e))}catch(d){(0,ky.default)().console.error(d)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Fe=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new tn),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,r),i.dispose=Fe._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};we.Emitter=Fe;Fe._noop=function(){}});var on=a(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.CancellationTokenSource=xe.CancellationToken=void 0;var Oy=se(),Cy=De(),rn=ze(),nn;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:rn.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:rn.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||Cy.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(nn=xe.CancellationToken||(xe.CancellationToken={}));var Ny=Object.freeze(function(t,e){let r=(0,Oy.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),Rt=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ny:(this._emitter||(this._emitter=new rn.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},sn=class{get token(){return this._token||(this._token=new Rt),this._token}cancel(){this._token?this._token.cancel():this._token=nn.Cancelled}dispose(){this._token?this._token instanceof Rt&&this._token.dispose():this._token=nn.None}};xe.CancellationTokenSource=sn});var Uu=a(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.ReadableStreamMessageReader=ae.AbstractMessageReader=ae.MessageReader=void 0;var un=se(),He=De(),an=ze(),Ay;(function(t){function e(r){let n=r;return n&&He.func(n.listen)&&He.func(n.dispose)&&He.func(n.onError)&&He.func(n.onClose)&&He.func(n.onPartialMessage)}t.is=e})(Ay=ae.MessageReader||(ae.MessageReader={}));var kt=class{constructor(){this.errorEmitter=new an.Emitter,this.closeEmitter=new an.Emitter,this.partialMessageEmitter=new an.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${He.string(e.message)?e.message:"unknown"}`)}};ae.AbstractMessageReader=kt;var cn;(function(t){function e(r){let n,i,o,l=new Map,d,g=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,l.set(o.name,o)),r.contentDecoders!==void 0)for(let h of r.contentDecoders)l.set(h.name,h);if(r.contentTypeDecoder!==void 0&&(d=r.contentTypeDecoder,g.set(d.name,d)),r.contentTypeDecoders!==void 0)for(let h of r.contentTypeDecoders)g.set(h.name,h)}return d===void 0&&(d=(0,un.default)().applicationJson.decoder,g.set(d.name,d)),{charset:n,contentDecoder:o,contentDecoders:l,contentTypeDecoder:d,contentTypeDecoders:g}}t.fromOptions=e})(cn||(cn={}));var ln=class extends kt{constructor(e,r){super(),this.readable=e,this.options=cn.fromOptions(r),this.buffer=(0,un.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let o=i.get("Content-Length");if(!o)throw new Error("Header must provide a Content-Length property.");let l=parseInt(o);if(isNaN(l))throw new Error("Content-Length value must be a number.");this.nextMessageLength=l}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(o=>{this.callback(o)},o=>{this.fireError(o)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,un.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ae.ReadableStreamMessageReader=ln});var Bu=a(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.Semaphore=void 0;var jy=se(),fn=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,jy.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};Mt.Semaphore=fn});var Vu=a(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.WriteableStreamMessageWriter=ue.AbstractMessageWriter=ue.MessageWriter=void 0;var Gu=se(),ut=De(),Ly=Bu(),Ju=ze(),Iy="Content-Length: ",Ku=`\r
`,$y;(function(t){function e(r){let n=r;return n&&ut.func(n.dispose)&&ut.func(n.onClose)&&ut.func(n.onError)&&ut.func(n.write)}t.is=e})($y=ue.MessageWriter||(ue.MessageWriter={}));var Ot=class{constructor(){this.errorEmitter=new Ju.Emitter,this.closeEmitter=new Ju.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${ut.string(e.message)?e.message:"unknown"}`)}};ue.AbstractMessageWriter=Ot;var dn;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,Gu.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,Gu.default)().applicationJson.encoder}}t.fromOptions=e})(dn||(dn={}));var pn=class extends Ot{constructor(e,r){super(),this.writable=e,this.options=dn.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Ly.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(Iy,n.byteLength.toString(),Ku),i.push(Ku),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};ue.WriteableStreamMessageWriter=pn});var tc=a(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.createMessageConnection=y.ConnectionOptions=y.CancellationStrategy=y.CancellationSenderStrategy=y.CancellationReceiverStrategy=y.ConnectionStrategy=y.ConnectionError=y.ConnectionErrors=y.LogTraceNotification=y.SetTraceNotification=y.TraceFormat=y.TraceValues=y.Trace=y.NullLogger=y.ProgressType=y.ProgressToken=void 0;var Qu=se(),z=De(),b=Yr(),Xu=en(),ct=ze(),hn=on(),ft;(function(t){t.type=new b.NotificationType("$/cancelRequest")})(ft||(ft={}));var Yu;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}t.is=e})(Yu=y.ProgressToken||(y.ProgressToken={}));var lt;(function(t){t.type=new b.NotificationType("$/progress")})(lt||(lt={}));var mn=class{constructor(){}};y.ProgressType=mn;var gn;(function(t){function e(r){return z.func(r)}t.is=e})(gn||(gn={}));y.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var q;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(q=y.Trace||(y.Trace={}));var Dy;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Dy=y.TraceValues||(y.TraceValues={}));(function(t){function e(n){if(!z.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(q=y.Trace||(y.Trace={}));var Y;(function(t){t.Text="text",t.JSON="json"})(Y=y.TraceFormat||(y.TraceFormat={}));(function(t){function e(r){return z.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Y=y.TraceFormat||(y.TraceFormat={}));var Zu;(function(t){t.type=new b.NotificationType("$/setTrace")})(Zu=y.SetTraceNotification||(y.SetTraceNotification={}));var yn;(function(t){t.type=new b.NotificationType("$/logTrace")})(yn=y.LogTraceNotification||(y.LogTraceNotification={}));var Ct;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Ct=y.ConnectionErrors||(y.ConnectionErrors={}));var pe=class extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,pe.prototype)}};y.ConnectionError=pe;var ec;(function(t){function e(r){let n=r;return n&&z.func(n.cancelUndispatched)}t.is=e})(ec=y.ConnectionStrategy||(y.ConnectionStrategy={}));var bn;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new hn.CancellationTokenSource}});function e(r){let n=r;return n&&z.func(n.createCancellationTokenSource)}t.is=e})(bn=y.CancellationReceiverStrategy||(y.CancellationReceiverStrategy={}));var vn;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(ft.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&z.func(n.sendCancellation)&&z.func(n.cleanup)}t.is=e})(vn=y.CancellationSenderStrategy||(y.CancellationSenderStrategy={}));var _n;(function(t){t.Message=Object.freeze({receiver:bn.Message,sender:vn.Message});function e(r){let n=r;return n&&bn.is(n.receiver)&&vn.is(n.sender)}t.is=e})(_n=y.CancellationStrategy||(y.CancellationStrategy={}));var Fy;(function(t){function e(r){let n=r;return n&&(_n.is(n.cancellationStrategy)||ec.is(n.connectionStrategy))}t.is=e})(Fy=y.ConnectionOptions||(y.ConnectionOptions={}));var Z;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Z||(Z={}));function zy(t,e,r,n){let i=r!==void 0?r:y.NullLogger,o=0,l=0,d=0,g="2.0",h,E=new Map,P,w=new Map,H=new Map,j,v=new Xu.LinkedMap,R=new Map,L=new Set,D=new Map,x=q.Off,V=Y.Text,k,ne=Z.New,Lt=new ct.Emitter,En=new ct.Emitter,Rn=new ct.Emitter,kn=new ct.Emitter,Mn=new ct.Emitter,pt=n&&n.cancellationStrategy?n.cancellationStrategy:_n.Message;function On(s){if(s===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+s.toString()}function dc(s){return s===null?"res-unknown-"+(++d).toString():"res-"+s.toString()}function pc(){return"not-"+(++l).toString()}function hc(s,c){b.Message.isRequest(c)?s.set(On(c.id),c):b.Message.isResponse(c)?s.set(dc(c.id),c):s.set(pc(),c)}function mc(s){}function Cn(){return ne===Z.Listening}function Nn(){return ne===Z.Closed}function Pe(){return ne===Z.Disposed}function An(){(ne===Z.New||ne===Z.Listening)&&(ne=Z.Closed,En.fire(void 0))}function gc(s){Lt.fire([s,void 0,void 0])}function yc(s){Lt.fire(s)}t.onClose(An),t.onError(gc),e.onClose(An),e.onError(yc);function jn(){j||v.size===0||(j=(0,Qu.default)().timer.setImmediate(()=>{j=void 0,bc()}))}function bc(){if(v.size===0)return;let s=v.shift();try{b.Message.isRequest(s)?_c(s):b.Message.isNotification(s)?xc(s):b.Message.isResponse(s)?wc(s):Sc(s)}finally{jn()}}let vc=s=>{try{if(b.Message.isNotification(s)&&s.method===ft.type.method){let c=s.params.id,f=On(c),p=v.get(f);if(b.Message.isRequest(p)){let C=n?.connectionStrategy,$=C&&C.cancelUndispatched?C.cancelUndispatched(p,mc):void 0;if($&&($.error!==void 0||$.result!==void 0)){v.delete(f),D.delete(c),$.id=p.id,ht($,s.method,Date.now()),e.write($).catch(()=>i.error("Sending response for canceled message failed."));return}}let O=D.get(c);if(O!==void 0){O.cancel(),It(s);return}else L.add(c)}hc(v,s)}finally{jn()}};function _c(s){if(Pe())return;function c(_,I,T){let F={jsonrpc:g,id:s.id};_ instanceof b.ResponseError?F.error=_.toJson():F.result=_===void 0?null:_,ht(F,I,T),e.write(F).catch(()=>i.error("Sending response failed."))}function f(_,I,T){let F={jsonrpc:g,id:s.id,error:_.toJson()};ht(F,I,T),e.write(F).catch(()=>i.error("Sending response failed."))}function p(_,I,T){_===void 0&&(_=null);let F={jsonrpc:g,id:s.id,result:_};ht(F,I,T),e.write(F).catch(()=>i.error("Sending response failed."))}qc(s);let O=E.get(s.method),C,$;O&&(C=O.type,$=O.handler);let W=Date.now();if($||h){let _=s.id??String(Date.now()),I=pt.receiver.createCancellationTokenSource(_);s.id!==null&&L.has(s.id)&&I.cancel(),s.id!==null&&D.set(_,I);try{let T;if($)if(s.params===void 0){if(C!==void 0&&C.numberOfParams!==0){f(new b.ResponseError(b.ErrorCodes.InvalidParams,`Request ${s.method} defines ${C.numberOfParams} params but received none.`),s.method,W);return}T=$(I.token)}else if(Array.isArray(s.params)){if(C!==void 0&&C.parameterStructures===b.ParameterStructures.byName){f(new b.ResponseError(b.ErrorCodes.InvalidParams,`Request ${s.method} defines parameters by name but received parameters by position`),s.method,W);return}T=$(...s.params,I.token)}else{if(C!==void 0&&C.parameterStructures===b.ParameterStructures.byPosition){f(new b.ResponseError(b.ErrorCodes.InvalidParams,`Request ${s.method} defines parameters by position but received parameters by name`),s.method,W);return}T=$(s.params,I.token)}else h&&(T=h(s.method,s.params,I.token));let F=T;T?F.then?F.then(Q=>{D.delete(_),c(Q,s.method,W)},Q=>{D.delete(_),Q instanceof b.ResponseError?f(Q,s.method,W):Q&&z.string(Q.message)?f(new b.ResponseError(b.ErrorCodes.InternalError,`Request ${s.method} failed with message: ${Q.message}`),s.method,W):f(new b.ResponseError(b.ErrorCodes.InternalError,`Request ${s.method} failed unexpectedly without providing any details.`),s.method,W)}):(D.delete(_),c(T,s.method,W)):(D.delete(_),p(T,s.method,W))}catch(T){D.delete(_),T instanceof b.ResponseError?c(T,s.method,W):T&&z.string(T.message)?f(new b.ResponseError(b.ErrorCodes.InternalError,`Request ${s.method} failed with message: ${T.message}`),s.method,W):f(new b.ResponseError(b.ErrorCodes.InternalError,`Request ${s.method} failed unexpectedly without providing any details.`),s.method,W)}}else f(new b.ResponseError(b.ErrorCodes.MethodNotFound,`Unhandled method ${s.method}`),s.method,W)}function wc(s){if(!Pe())if(s.id===null)s.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(s.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let c=s.id,f=R.get(c);if(Ec(s,f),f!==void 0){R.delete(c);try{if(s.error){let p=s.error;f.reject(new b.ResponseError(p.code,p.message,p.data))}else if(s.result!==void 0)f.resolve(s.result);else throw new Error("Should never happen.")}catch(p){p.message?i.error(`Response handler '${f.method}' failed with message: ${p.message}`):i.error(`Response handler '${f.method}' failed unexpectedly.`)}}}}function xc(s){if(Pe())return;let c,f;if(s.method===ft.type.method){let p=s.params.id;L.delete(p),It(s);return}else{let p=w.get(s.method);p&&(f=p.handler,c=p.type)}if(f||P)try{if(It(s),f)if(s.params===void 0)c!==void 0&&c.numberOfParams!==0&&c.parameterStructures!==b.ParameterStructures.byName&&i.error(`Notification ${s.method} defines ${c.numberOfParams} params but received none.`),f();else if(Array.isArray(s.params)){let p=s.params;s.method===lt.type.method&&p.length===2&&Yu.is(p[0])?f({token:p[0],value:p[1]}):(c!==void 0&&(c.parameterStructures===b.ParameterStructures.byName&&i.error(`Notification ${s.method} defines parameters by name but received parameters by position`),c.numberOfParams!==s.params.length&&i.error(`Notification ${s.method} defines ${c.numberOfParams} params but received ${p.length} arguments`)),f(...p))}else c!==void 0&&c.parameterStructures===b.ParameterStructures.byPosition&&i.error(`Notification ${s.method} defines parameters by position but received parameters by name`),f(s.params);else P&&P(s.method,s.params)}catch(p){p.message?i.error(`Notification handler '${s.method}' failed with message: ${p.message}`):i.error(`Notification handler '${s.method}' failed unexpectedly.`)}else Rn.fire(s)}function Sc(s){if(!s){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(s,null,4)}`);let c=s;if(z.string(c.id)||z.number(c.id)){let f=c.id,p=R.get(f);p&&p.reject(new Error("The received response has neither a result nor an error property."))}}function ce(s){if(s!=null)switch(x){case q.Verbose:return JSON.stringify(s,null,4);case q.Compact:return JSON.stringify(s);default:return}}function Tc(s){if(!(x===q.Off||!k))if(V===Y.Text){let c;(x===q.Verbose||x===q.Compact)&&s.params&&(c=`Params: ${ce(s.params)}

`),k.log(`Sending request '${s.method} - (${s.id})'.`,c)}else qe("send-request",s)}function Pc(s){if(!(x===q.Off||!k))if(V===Y.Text){let c;(x===q.Verbose||x===q.Compact)&&(s.params?c=`Params: ${ce(s.params)}

`:c=`No parameters provided.

`),k.log(`Sending notification '${s.method}'.`,c)}else qe("send-notification",s)}function ht(s,c,f){if(!(x===q.Off||!k))if(V===Y.Text){let p;(x===q.Verbose||x===q.Compact)&&(s.error&&s.error.data?p=`Error data: ${ce(s.error.data)}

`:s.result?p=`Result: ${ce(s.result)}

`:s.error===void 0&&(p=`No result returned.

`)),k.log(`Sending response '${c} - (${s.id})'. Processing request took ${Date.now()-f}ms`,p)}else qe("send-response",s)}function qc(s){if(!(x===q.Off||!k))if(V===Y.Text){let c;(x===q.Verbose||x===q.Compact)&&s.params&&(c=`Params: ${ce(s.params)}

`),k.log(`Received request '${s.method} - (${s.id})'.`,c)}else qe("receive-request",s)}function It(s){if(!(x===q.Off||!k||s.method===yn.type.method))if(V===Y.Text){let c;(x===q.Verbose||x===q.Compact)&&(s.params?c=`Params: ${ce(s.params)}

`:c=`No parameters provided.

`),k.log(`Received notification '${s.method}'.`,c)}else qe("receive-notification",s)}function Ec(s,c){if(!(x===q.Off||!k))if(V===Y.Text){let f;if((x===q.Verbose||x===q.Compact)&&(s.error&&s.error.data?f=`Error data: ${ce(s.error.data)}

`:s.result?f=`Result: ${ce(s.result)}

`:s.error===void 0&&(f=`No result returned.

`)),c){let p=s.error?` Request failed: ${s.error.message} (${s.error.code}).`:"";k.log(`Received response '${c.method} - (${s.id})' in ${Date.now()-c.timerStart}ms.${p}`,f)}else k.log(`Received response ${s.id} without active response promise.`,f)}else qe("receive-response",s)}function qe(s,c){if(!k||x===q.Off)return;let f={isLSPMessage:!0,type:s,message:c,timestamp:Date.now()};k.log(f)}function Be(){if(Nn())throw new pe(Ct.Closed,"Connection is closed.");if(Pe())throw new pe(Ct.Disposed,"Connection is disposed.")}function Rc(){if(Cn())throw new pe(Ct.AlreadyListening,"Connection is already listening")}function kc(){if(!Cn())throw new Error("Call listen() first.")}function Ge(s){return s===void 0?null:s}function Ln(s){if(s!==null)return s}function In(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}function $t(s,c){switch(s){case b.ParameterStructures.auto:return In(c)?Ln(c):[Ge(c)];case b.ParameterStructures.byName:if(!In(c))throw new Error("Received parameters by name but param is not an object literal.");return Ln(c);case b.ParameterStructures.byPosition:return[Ge(c)];default:throw new Error(`Unknown parameter structure ${s.toString()}`)}}function $n(s,c){let f,p=s.numberOfParams;switch(p){case 0:f=void 0;break;case 1:f=$t(s.parameterStructures,c[0]);break;default:f=[];for(let O=0;O<c.length&&O<p;O++)f.push(Ge(c[O]));if(c.length<p)for(let O=c.length;O<p;O++)f.push(null);break}return f}let Ee={sendNotification:(s,...c)=>{Be();let f,p;if(z.string(s)){f=s;let C=c[0],$=0,W=b.ParameterStructures.auto;b.ParameterStructures.is(C)&&($=1,W=C);let _=c.length,I=_-$;switch(I){case 0:p=void 0;break;case 1:p=$t(W,c[$]);break;default:if(W===b.ParameterStructures.byName)throw new Error(`Received ${I} parameters for 'by Name' notification parameter structure.`);p=c.slice($,_).map(T=>Ge(T));break}}else{let C=c;f=s.method,p=$n(s,C)}let O={jsonrpc:g,method:f,params:p};return Pc(O),e.write(O).catch(()=>i.error("Sending notification failed."))},onNotification:(s,c)=>{Be();let f;return z.func(s)?P=s:c&&(z.string(s)?(f=s,w.set(s,{type:void 0,handler:c})):(f=s.method,w.set(s.method,{type:s,handler:c}))),{dispose:()=>{f!==void 0?w.delete(f):P=void 0}}},onProgress:(s,c,f)=>{if(H.has(c))throw new Error(`Progress handler for token ${c} already registered`);return H.set(c,f),{dispose:()=>{H.delete(c)}}},sendProgress:(s,c,f)=>Ee.sendNotification(lt.type,{token:c,value:f}),onUnhandledProgress:kn.event,sendRequest:(s,...c)=>{Be(),kc();let f,p,O;if(z.string(s)){f=s;let _=c[0],I=c[c.length-1],T=0,F=b.ParameterStructures.auto;b.ParameterStructures.is(_)&&(T=1,F=_);let Q=c.length;hn.CancellationToken.is(I)&&(Q=Q-1,O=I);let he=Q-T;switch(he){case 0:p=void 0;break;case 1:p=$t(F,c[T]);break;default:if(F===b.ParameterStructures.byName)throw new Error(`Received ${he} parameters for 'by Name' request parameter structure.`);p=c.slice(T,Q).map(le=>Ge(le));break}}else{let _=c;f=s.method,p=$n(s,_);let I=s.numberOfParams;O=hn.CancellationToken.is(_[I])?_[I]:void 0}let C=o++,$;return O&&($=O.onCancellationRequested(()=>{let _=pt.sender.sendCancellation(Ee,C);return _===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${C}`),Promise.resolve()):_.catch(()=>{i.log(`Sending cancellation messages for id ${C} failed`)})})),new Promise((_,I)=>{let T={jsonrpc:g,id:C,method:f,params:p},F=le=>{_(le),pt.sender.cleanup(C),$?.dispose()},Q=le=>{I(le),pt.sender.cleanup(C),$?.dispose()},he={method:f,timerStart:Date.now(),resolve:F,reject:Q};Tc(T);try{e.write(T).catch(()=>i.error("Sending request failed."))}catch(le){he.reject(new b.ResponseError(b.ErrorCodes.MessageWriteError,le.message?le.message:"Unknown reason")),he=null}he&&R.set(C,he)})},onRequest:(s,c)=>{Be();let f=null;return gn.is(s)?(f=void 0,h=s):z.string(s)?(f=null,c!==void 0&&(f=s,E.set(s,{handler:c,type:void 0}))):c!==void 0&&(f=s.method,E.set(s.method,{type:s,handler:c})),{dispose:()=>{f!==null&&(f!==void 0?E.delete(f):h=void 0)}}},hasPendingResponse:()=>R.size>0,trace:async(s,c,f)=>{let p=!1,O=Y.Text;f!==void 0&&(z.boolean(f)?p=f:(p=f.sendNotification||!1,O=f.traceFormat||Y.Text)),x=s,V=O,x===q.Off?k=void 0:k=c,p&&!Nn()&&!Pe()&&await Ee.sendNotification(Zu.type,{value:q.toString(s)})},onError:Lt.event,onClose:En.event,onUnhandledNotification:Rn.event,onDispose:Mn.event,end:()=>{e.end()},dispose:()=>{if(Pe())return;ne=Z.Disposed,Mn.fire(void 0);let s=new b.ResponseError(b.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let c of R.values())c.reject(s);R=new Map,D=new Map,L=new Set,v=new Xu.LinkedMap,z.func(e.dispose)&&e.dispose(),z.func(t.dispose)&&t.dispose()},listen:()=>{Be(),Rc(),ne=Z.Listening,t.listen(vc)},inspect:()=>{(0,Qu.default)().console.log("inspect")}};return Ee.onNotification(yn.type,s=>{if(x===q.Off||!k)return;let c=x===q.Verbose||x===q.Compact;k.log(s.message,c?s.verbose:void 0)}),Ee.onNotification(lt.type,s=>{let c=H.get(s.token);c?c(s.value):kn.fire(s)}),Ee}y.createMessageConnection=zy});var Tn=a(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.TraceFormat=u.TraceValues=u.Trace=u.ProgressType=u.ProgressToken=u.createMessageConnection=u.NullLogger=u.ConnectionOptions=u.ConnectionStrategy=u.WriteableStreamMessageWriter=u.AbstractMessageWriter=u.MessageWriter=u.ReadableStreamMessageReader=u.AbstractMessageReader=u.MessageReader=u.CancellationToken=u.CancellationTokenSource=u.Emitter=u.Event=u.Disposable=u.LRUCache=u.Touch=u.LinkedMap=u.ParameterStructures=u.NotificationType9=u.NotificationType8=u.NotificationType7=u.NotificationType6=u.NotificationType5=u.NotificationType4=u.NotificationType3=u.NotificationType2=u.NotificationType1=u.NotificationType0=u.NotificationType=u.ErrorCodes=u.ResponseError=u.RequestType9=u.RequestType8=u.RequestType7=u.RequestType6=u.RequestType5=u.RequestType4=u.RequestType3=u.RequestType2=u.RequestType1=u.RequestType0=u.RequestType=u.Message=u.RAL=void 0;u.CancellationStrategy=u.CancellationSenderStrategy=u.CancellationReceiverStrategy=u.ConnectionError=u.ConnectionErrors=u.LogTraceNotification=u.SetTraceNotification=void 0;var M=Yr();Object.defineProperty(u,"Message",{enumerable:!0,get:function(){return M.Message}});Object.defineProperty(u,"RequestType",{enumerable:!0,get:function(){return M.RequestType}});Object.defineProperty(u,"RequestType0",{enumerable:!0,get:function(){return M.RequestType0}});Object.defineProperty(u,"RequestType1",{enumerable:!0,get:function(){return M.RequestType1}});Object.defineProperty(u,"RequestType2",{enumerable:!0,get:function(){return M.RequestType2}});Object.defineProperty(u,"RequestType3",{enumerable:!0,get:function(){return M.RequestType3}});Object.defineProperty(u,"RequestType4",{enumerable:!0,get:function(){return M.RequestType4}});Object.defineProperty(u,"RequestType5",{enumerable:!0,get:function(){return M.RequestType5}});Object.defineProperty(u,"RequestType6",{enumerable:!0,get:function(){return M.RequestType6}});Object.defineProperty(u,"RequestType7",{enumerable:!0,get:function(){return M.RequestType7}});Object.defineProperty(u,"RequestType8",{enumerable:!0,get:function(){return M.RequestType8}});Object.defineProperty(u,"RequestType9",{enumerable:!0,get:function(){return M.RequestType9}});Object.defineProperty(u,"ResponseError",{enumerable:!0,get:function(){return M.ResponseError}});Object.defineProperty(u,"ErrorCodes",{enumerable:!0,get:function(){return M.ErrorCodes}});Object.defineProperty(u,"NotificationType",{enumerable:!0,get:function(){return M.NotificationType}});Object.defineProperty(u,"NotificationType0",{enumerable:!0,get:function(){return M.NotificationType0}});Object.defineProperty(u,"NotificationType1",{enumerable:!0,get:function(){return M.NotificationType1}});Object.defineProperty(u,"NotificationType2",{enumerable:!0,get:function(){return M.NotificationType2}});Object.defineProperty(u,"NotificationType3",{enumerable:!0,get:function(){return M.NotificationType3}});Object.defineProperty(u,"NotificationType4",{enumerable:!0,get:function(){return M.NotificationType4}});Object.defineProperty(u,"NotificationType5",{enumerable:!0,get:function(){return M.NotificationType5}});Object.defineProperty(u,"NotificationType6",{enumerable:!0,get:function(){return M.NotificationType6}});Object.defineProperty(u,"NotificationType7",{enumerable:!0,get:function(){return M.NotificationType7}});Object.defineProperty(u,"NotificationType8",{enumerable:!0,get:function(){return M.NotificationType8}});Object.defineProperty(u,"NotificationType9",{enumerable:!0,get:function(){return M.NotificationType9}});Object.defineProperty(u,"ParameterStructures",{enumerable:!0,get:function(){return M.ParameterStructures}});var wn=en();Object.defineProperty(u,"LinkedMap",{enumerable:!0,get:function(){return wn.LinkedMap}});Object.defineProperty(u,"LRUCache",{enumerable:!0,get:function(){return wn.LRUCache}});Object.defineProperty(u,"Touch",{enumerable:!0,get:function(){return wn.Touch}});var Hy=Tr();Object.defineProperty(u,"Disposable",{enumerable:!0,get:function(){return Hy.Disposable}});var rc=ze();Object.defineProperty(u,"Event",{enumerable:!0,get:function(){return rc.Event}});Object.defineProperty(u,"Emitter",{enumerable:!0,get:function(){return rc.Emitter}});var nc=on();Object.defineProperty(u,"CancellationTokenSource",{enumerable:!0,get:function(){return nc.CancellationTokenSource}});Object.defineProperty(u,"CancellationToken",{enumerable:!0,get:function(){return nc.CancellationToken}});var xn=Uu();Object.defineProperty(u,"MessageReader",{enumerable:!0,get:function(){return xn.MessageReader}});Object.defineProperty(u,"AbstractMessageReader",{enumerable:!0,get:function(){return xn.AbstractMessageReader}});Object.defineProperty(u,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return xn.ReadableStreamMessageReader}});var Sn=Vu();Object.defineProperty(u,"MessageWriter",{enumerable:!0,get:function(){return Sn.MessageWriter}});Object.defineProperty(u,"AbstractMessageWriter",{enumerable:!0,get:function(){return Sn.AbstractMessageWriter}});Object.defineProperty(u,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Sn.WriteableStreamMessageWriter}});var J=tc();Object.defineProperty(u,"ConnectionStrategy",{enumerable:!0,get:function(){return J.ConnectionStrategy}});Object.defineProperty(u,"ConnectionOptions",{enumerable:!0,get:function(){return J.ConnectionOptions}});Object.defineProperty(u,"NullLogger",{enumerable:!0,get:function(){return J.NullLogger}});Object.defineProperty(u,"createMessageConnection",{enumerable:!0,get:function(){return J.createMessageConnection}});Object.defineProperty(u,"ProgressToken",{enumerable:!0,get:function(){return J.ProgressToken}});Object.defineProperty(u,"ProgressType",{enumerable:!0,get:function(){return J.ProgressType}});Object.defineProperty(u,"Trace",{enumerable:!0,get:function(){return J.Trace}});Object.defineProperty(u,"TraceValues",{enumerable:!0,get:function(){return J.TraceValues}});Object.defineProperty(u,"TraceFormat",{enumerable:!0,get:function(){return J.TraceFormat}});Object.defineProperty(u,"SetTraceNotification",{enumerable:!0,get:function(){return J.SetTraceNotification}});Object.defineProperty(u,"LogTraceNotification",{enumerable:!0,get:function(){return J.LogTraceNotification}});Object.defineProperty(u,"ConnectionErrors",{enumerable:!0,get:function(){return J.ConnectionErrors}});Object.defineProperty(u,"ConnectionError",{enumerable:!0,get:function(){return J.ConnectionError}});Object.defineProperty(u,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return J.CancellationReceiverStrategy}});Object.defineProperty(u,"CancellationSenderStrategy",{enumerable:!0,get:function(){return J.CancellationSenderStrategy}});Object.defineProperty(u,"CancellationStrategy",{enumerable:!0,get:function(){return J.CancellationStrategy}});var Wy=se();u.RAL=Wy.default});var oc=a(S=>{"use strict";var Uy=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),By=S&&S.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Uy(e,t,r)};Object.defineProperty(S,"__esModule",{value:!0});S.createMessageConnection=S.createServerSocketTransport=S.createClientSocketTransport=S.createServerPipeTransport=S.createClientPipeTransport=S.generateRandomPipeName=S.StreamMessageWriter=S.StreamMessageReader=S.SocketMessageWriter=S.SocketMessageReader=S.IPCMessageWriter=S.IPCMessageReader=void 0;var We=Du();We.default.install();var te=Tn(),ic=require("path"),Gy=require("os"),Jy=require("crypto"),jt=require("net");By(Tn(),S);var Pn=class extends te.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),te.Disposable.create(()=>this.process.off("message",e))}};S.IPCMessageReader=Pn;var qn=class extends te.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};S.IPCMessageWriter=qn;var Se=class extends te.ReadableStreamMessageReader{constructor(e,r="utf-8"){super((0,We.default)().stream.asReadableStream(e),r)}};S.SocketMessageReader=Se;var Te=class extends te.WriteableStreamMessageWriter{constructor(e,r){super((0,We.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};S.SocketMessageWriter=Te;var Nt=class extends te.ReadableStreamMessageReader{constructor(e,r){super((0,We.default)().stream.asReadableStream(e),r)}};S.StreamMessageReader=Nt;var At=class extends te.WriteableStreamMessageWriter{constructor(e,r){super((0,We.default)().stream.asWritableStream(e),r)}};S.StreamMessageWriter=At;var sc=process.env.XDG_RUNTIME_DIR,Ky=new Map([["linux",107],["darwin",103]]);function Vy(){let t=(0,Jy.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;sc?e=ic.join(sc,`vscode-ipc-${t}.sock`):e=ic.join(Gy.tmpdir(),`vscode-${t}.sock`);let r=Ky.get(process.platform);return r!==void 0&&e.length>=r&&(0,We.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}S.generateRandomPipeName=Vy;function Qy(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let l=(0,jt.createServer)(d=>{l.close(),r([new Se(d,e),new Te(d,e)])});l.on("error",o),l.listen(t,()=>{l.removeListener("error",o),i({onConnected:()=>n})})})}S.createClientPipeTransport=Qy;function Xy(t,e="utf-8"){let r=(0,jt.createConnection)(t);return[new Se(r,e),new Te(r,e)]}S.createServerPipeTransport=Xy;function Yy(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let l=(0,jt.createServer)(d=>{l.close(),r([new Se(d,e),new Te(d,e)])});l.on("error",o),l.listen(t,"127.0.0.1",()=>{l.removeListener("error",o),i({onConnected:()=>n})})})}S.createClientSocketTransport=Yy;function Zy(t,e="utf-8"){let r=(0,jt.createConnection)(t,"127.0.0.1");return[new Se(r,e),new Te(r,e)]}S.createServerSocketTransport=Zy;function eb(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function tb(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function rb(t,e,r,n){r||(r=te.NullLogger);let i=eb(t)?new Nt(t):t,o=tb(e)?new At(e):e;return te.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,te.createMessageConnection)(i,o,r,n)}S.createMessageConnection=rb});var uc=a((fw,ac)=>{"use strict";ac.exports=oc()});var Pu=me(mu());var it=me(require("node:fs")),lr=me(require("node:path")),Su=me(require("@parcel/source-map")),fr=me(wu()),ty=/data:application\/json[^,]+base64,/,ry=[/server\/index.js$/,/^node:internal\/process\/task_queues/],ny=[/^node:/],iy=5,sy=1,oy=new fr.default({internals:fr.default.nodeInternals()});function Tu(t){if(!t)return[];try{return ay(t)}catch{return[]}}function ay(t){let e=t.split(`
`).slice(1,iy).map(r=>{let n=oy.parseLine(r);return{raw:r,file:n?.file,line:n?.line,column:n?.column,function:n?.function}});return cy(uy(e))}function uy(t){return t.filter(e=>!ry.some(r=>r.test(e.file??"")))}function cy(t){let e=new Map,r=[],n=0;for(let i of t){let o=i;if(n>=sy){r.push(o);continue}let l=i.file;if(!l){r.push(o);continue}try{let d=e.get(l)??fy(l);d&&(e.set(l,d),o=ly(o,d))}catch{}finally{n+=1}r.push(o)}return r}function ly(t,e){if(!t.file||!t.line||!t.column)return t;let r=e.findClosestMapping(t.line,t.column);return r?{raw:t.raw,file:lr.default.resolve(lr.default.dirname(t.file),r.source??""),line:r.original?.line,column:r.original?.column,function:t.function}:t}function fy(t){if(ny.some(i=>i.test(t)))return null;let e;if(process.env.NODE_ENV==="development"?e=xu(t):(e=dy(t),e||(e=xu(t))),!e)return null;let r=JSON.parse(e),n=new Su.default;return n.addVLQMap(r),n}function xu(t){if(!it.default.existsSync(t))return null;let e=it.default.readFileSync(t).toString("utf8");if(!ty.test(e))return null;let r=e.slice(e.lastIndexOf(",")+1);return Buffer.from(r,"base64").toString("utf8")}function dy(t){let e=`${t}.map`;return it.default.existsSync(e)?it.default.readFileSync(e).toString("utf8"):null}function st(t,e,r,n){let i={};if(n&&(i.sessionId=n),typeof r=="string"||r instanceof String)i.code=t,i.title=e,i.name=r;else if(r instanceof Error)i.code=t,i.title=e,i.name=r.name,i.message=r.message,i.stack=r.stack;else{let o=r;i.code=o?.code??t,i.title=o?.title??e,i.name=o?.error?.name??o?.error,i.message=o?.error?.message,i.stack=o?.error?.stack}return i.stack&&(i.stack=Tu(String(i.stack))),i.name||(i.name=r?JSON.stringify(r):e),typeof i.message=="object"&&(i.message=JSON.stringify(i.message)),i}function qu(t,e,r,n){let i=JSON.stringify(st(t,e,r,n));return new Error(i)}function dr(t){return(0,Pu.default)(t,e=>typeof e=="string"?py(e):e)}function py(t){return t.replace(/(\\ud800|\ud800|\0)/gi,"")}async function pr(t){return{nodeVersion:process.version}}var Mu=require("worker_threads");var hr=me(require("crypto"),1);var Eu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var hy=128,ye,Ie,my=t=>{!ye||ye.length<t?(ye=Buffer.allocUnsafe(t*hy),hr.default.randomFillSync(ye),Ie=0):Ie+t>ye.length&&(hr.default.randomFillSync(ye),Ie=0),Ie+=t};var Ru=(t=21)=>{my(t-=0);let e="";for(let r=Ie-t;r<Ie;r++)e+=Eu[ye[r]&63];return e};var mr;if(process.env.RAYCAST_OS_LOG!==void 0){let{NapiOsLog:t}=require("@raycast/napi");mr=new t(process.env.RAYCAST_BUNDLE_ID,"node")}else mr={log:(t,e)=>{}};function gr(t,e){mr.log(t,e)}function X(t){gr(1,t)}function ku(t){gr(2,t)}function U(t){gr(16,t)}var Pt=class{get id(){return this.options.id}constructor(e,r){this.options=e,this.terminationHandler=r,this.resultHandlers=new Map,this.worker=new Mu.Worker(e.workerPath,{workerData:e,stdin:!0,stdout:!0,stderr:!0,resourceLimits:{maxOldGenerationSizeMb:e.maxHeapSizeMb}}),e.timeout&&(this.timeoutId=setTimeout(this.timeout.bind(this),e.timeout*1e3))}load(){return this.worker.on("message",async e=>{let{kind:r}=e;switch(r){case"notify":{let{method:n}=e,{params:i}=e;be(n,i)}break;case"request":{let{id:n}=e;try{let{method:i}=e,{params:o}=e,l=await Ou(i,{...o,sessionId:this.id,requestId:n});this.worker.postMessage({kind:"result",id:n,result:{success:!0,value:l}})}catch(i){this.worker.postMessage({kind:"result",id:n,result:{success:!1,error:i}})}}break;case"result":{let{id:n}=e,{result:i}=e;this.resultHandlers.get(n)?.(i),this.resultHandlers.delete(n)}break;default:break}}),this.worker.on("messageerror",e=>{U(`Worker (${this.id}) message error: ${e}`),Tt(this.id,5,"Worker Message Error",e)}),this.worker.on("error",e=>{U(`Worker (${this.id}) error: ${e}`),Tt(this.id,6,"Worker Error",e)}),this.worker.on("exit",e=>{X(`Worker (${this.id}) exit: ${e}`),this.removeListeners(),this.terminationHandler?.(this.id),be("commandExited",{sessionId:this.id,code:e})}),this.request("initialize",{})}async unload(){try{return await this.worker.terminate()}finally{this.removeListeners()}}request(e,r){return new Promise((n,i)=>{let o=Ru(),l=d=>{if(d.success===!1){U(`Worker (${this.id}) request error: ${d.error}`),i(qu(8,"Worker Request Error",d.error,this.id));return}n(d.value)};this.resultHandlers.set(o,l),this.worker.postMessage({kind:"request",id:o,method:e,params:r})})}async timeout(){try{this.worker.removeAllListeners("exit"),await this.worker.terminate()}catch(e){U(`Worker (${this.id}) timeout error: ${e}`),Tt(this.id,6,"Worker Timeout Error",e)}finally{this.removeListeners(),this.terminationHandler?.(this.id),be("commandExited",{sessionId:this.id,code:14})}}removeListeners(){this.worker.removeAllListeners("message"),this.worker.removeAllListeners("messageerror"),this.worker.removeAllListeners("error"),this.worker.removeAllListeners("exit"),this.timeoutId&&clearTimeout(this.timeoutId)}async diagnostics(){let e=this.worker.performance.eventLoopUtilization(),r=this.worker.performance.eventLoopUtilization(e,this.lastELU);return this.lastELU=e,{id:this.options.id,extensionName:this.options.extensionName,name:this.options.commandName,mode:this.options.commandMode,isDevelopment:this.options.isDevelopment,launchType:this.options.launchType,timeout:this.options.timeout,eventLoopUtilization:r,startedAt:this.options.startedAt}}};var de=new Map;async function Cu(t){let e=new Pt(t,r=>{de.delete(r)});return de.set(t.id,e),X(`Worker (${t.id}) loading, num workers: ${de.size}`),e.load()}async function Nu(t){let e=de.get(t);if(!!e)try{return await e.unload()}finally{de.delete(t),X(`Worker (${t}) unloaded, num workers: ${de.size}`)}}async function Au(t,e,r){let n=de.get(t);return n?n.request(e,r):(ku(`Worker session unknown: ${t}`),Promise.reject(new Error(JSON.stringify(st(11,"Command id unknown",null,t)))))}async function ju(){let t=Array.from(de.values()).map(e=>e.diagnostics());return Promise.all(t)}async function yr(t){let e=t?.sessionId,r=t?.workerPath,n=t?.extensionName,i=t?.commandName,o=t?.commandMode,l=t?.commandPath,d=t?.assetsPath,g=t?.supportPath,h=t?.maxHeapSizeMb,E=t?.isDevelopment,P=t?.appearance,w=t?.textSize,H=t?.draftValues,j=t?.launchType,v=t?.timeout,R=t?.startedAt,L=t?.canAccessAI;if(!e||!r||!n||!i||!o||!l||!d||!g||!h||!P||!w||!j)return U("Invalid parameters (load command)"),Promise.reject(new Error(`Invalid parameters ${t}`));let D=t?.preferences,x=t?.arguments,V=t?.launchContext,k=t?.fallbackText;return await Cu({id:e,workerPath:r,extensionName:n,commandName:i,commandMode:o,commandPath:l,assetsPath:d,supportPath:g,preferences:D,maxHeapSizeMb:h,isDevelopment:E,appearance:P,textSize:w,draftValues:H,argumentValues:x,launchType:j,timeout:v,startedAt:R,launchContext:V,fallbackText:k,canAccessAI:L})}async function br(t){let e=t?.sessionId;return e?await Nu(e):(U("Invalid parameters (unload command)"),Promise.reject(new Error("Invalid parameters")))}async function vr(t){let e=t?.sessionId;return e?await Au(e,"nativeCallback",t):(U("Invalid parameters (native callback)"),Promise.reject(new Error("Invalid parameters")))}async function _r(t){return{workerDiagnostics:await ju()}}var Ue=me(uc());var re=Ue.createMessageConnection(new Ue.StreamMessageReader(process.stdin),new Ue.StreamMessageWriter(process.stdout));re.onRequest("initialize",t=>(X(`Server connection initialize: ${process.env.NODE_ENV}`),pr(t)));re.onRequest("loadCommand",t=>(X(`Server connection (${t.sessionId}) loadCommand: ${t.launchType}`),yr(t)));re.onRequest("unloadCommand",t=>(X(`Server connection (${t.sessionId}) unloadCommand`),br(t)));re.onRequest("nativeCallback",t=>(X(`Server connection (${t.sessionId}) nativeCallback: ${t.callbackId}`),vr(t)));re.onRequest("diagnostics",t=>(X(`Server connection (${t.sessionId}) diagnostics`),_r(t)));re.onClose(()=>{X("Server connection close"),process.exit(0)});re.onError(t=>{let e=`Server connection error: ${t}`;U(e),process.stderr.write(`${e}
`),process.exit(1)});function cc(){re.listen()}function Ou(t,e){return re.sendRequest(t,dr(e))}function be(t,e){return re.sendNotification(t,dr(e))}var lc=require("util");function fc(){console.log=function(){return dt("debug")}(),console.dir=console.log,console.debug=function(){return dt("debug")}(),console.info=function(){return dt("info")}(),console.warn=function(){return dt("warn")}(),console.error=function(){return dt("error")}()}function dt(t){return function(e,...r){try{let n=(0,lc.formatWithOptions)({showHidden:!1},e,...r);be("log",{level:t,message:n,params:[]})}catch{process.stderr.write("Failed logging message: "+String(e)+", params: "+String(r))}}}function Tt(t,e,r,n){U(`Server exception code: ${e} title: ${r}, error: ${n}, sessionId: ${t}`),be("commandException",st(e,r,n,t))}process.on("uncaughtException",t=>{let e=`uncaughtException: ${t}`;U(e),process.stderr.write(`${e}
`),process.exit(1)});process.on("unhandledRejection",(t,e)=>{let r=`unhandledRejection: ${t}`;U(r),process.stderr.write(`${r}
`),process.exit(1)});fc();cc();
